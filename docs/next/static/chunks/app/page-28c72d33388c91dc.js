(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9528:function(e,t,n){Promise.resolve().then(n.bind(n,9416))},9416:function(e,t,n){"use strict";n.d(t,{default:function(){return y}});var i=n(7437),o=n(2265);let a={burst:{active:20,break:5},normal:{active:25,break:5},double:{active:50,break:10}};var s=n(6648);function c(e){let t=["spring","summer","autumn","winter"][Math.min(Math.floor(4*e.timeInfo.displayRatio),3)];return(0,i.jsx)("div",{className:"absolute w-full h-full z-[-100]",children:(0,i.jsx)(s.default,{fill:!0,objectFit:"contain",src:"/chilldoro/"+t+".png",alt:t+" image"})})}let l=!0;function r(e){if("undefined"==typeof document)throw Error("This function should only be called on the client.");var t=new Audio(e);document.body.appendChild(t),t.muted=l,t.play(),setTimeout(()=>{t.remove()},1e4)}function d(e){return("0"+e).slice(-2)}let m=!0;function u(e){let t=e.timeInfo.secondsSinceStartTime<=60*e.timeInfo.pomodoroType.active,n=t?Math.ceil(60*e.timeInfo.pomodoroType.active-e.timeInfo.secondsSinceStartTime):Math.ceil(60*e.timeInfo.pomodoroType.break-(e.timeInfo.secondsSinceStartTime-60*e.timeInfo.pomodoroType.active)),o="".concat(d(Math.floor(n/60)),":").concat(d(n%60)),a=e.timeInfo.paused?"text-black bg-cyan-200":t?"text-green-700 bg-white":"text-cyan-300 bg-white";return!m&&t?r("spring_upon_us.mp3"):m&&!t&&r("winter_upon_us.mp3"),m=t,(0,i.jsx)("h1",{className:"rounded-lg p-2 text-2xl font-extrabold text-center ".concat(a),children:o})}function f(e){let t=(e.timeInfo.displayRatio*Math.PI*2+4.19).toString()+"rad";return(0,i.jsxs)("div",{className:"absolute top-0 left-0 size-[20svw]",children:[(0,i.jsx)(s.default,{className:"z-[-50]",fill:!0,objectFit:"contain",src:"/chilldoro/wheel.png",alt:"wheel image"}),(0,i.jsx)("div",{className:"py-[calc(10svw-2em)] px-[calc(10svw-4em)]",children:(0,i.jsx)(u,{timeInfo:e.timeInfo})}),(0,i.jsx)(s.default,{className:"z-[-25]",fill:!0,style:{rotate:t},objectFit:"contain",src:"/chilldoro/handle.png",alt:"handle image"})]})}function h(e){return(0,i.jsx)("div",{className:"absolute top-0 right-0 size-[20svw]",children:e.isMuted?(0,i.jsx)(s.default,{className:"z-[-50]",fill:!0,objectFit:"contain",src:"/chilldoro/sound_off.png",alt:"sound off"}):(0,i.jsx)(s.default,{className:"z-[-50]",fill:!0,objectFit:"contain",src:"/chilldoro/sound_on.png",alt:"sound on"})})}let p={KeyH:{description:"Press The H key to toggle the help page",mnemonic:"Help"},KeyN:{description:"Fast forward to next break or work part",mnemonic:"Next"},KeyS:{description:"Cycle between Pomodoro types",mnemonic:"Switch"},KeyM:{description:"Unmute/Mute",mnemonic:"Mute"},KeyF:{description:"Freeze/Unfreeze",mnemonic:"Freeze"}};function b(e){return e.showPage?(0,i.jsx)("div",{className:"absolute top-0 left-0 w-screen ",children:(0,i.jsx)("div",{className:"m-auto my-[20svh] w-min px-4 bg-black/60 rounded-lg text-white font-semibold text-center min-h-[60svh]",children:(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b-2 font-extrabold",children:[(0,i.jsx)("th",{className:"py-6",children:"Key"}),(0,i.jsx)("th",{className:"py-6",children:"Mnemonic"}),(0,i.jsx)("th",{className:"py-6",children:"Description"})]})}),(0,i.jsx)("tbody",{children:Object.keys(p).map(e=>(0,i.jsxs)("tr",{className:"border-b",children:[(0,i.jsx)("td",{className:"min-w-[6em] py-4",children:e.replace("Key","")}),(0,i.jsx)("td",{className:"min-w-[10em] py-4",children:p[e].mnemonic}),(0,i.jsx)("td",{className:"min-w-[24em] py-4",children:p[e].description})]},e))})]})})}):(0,i.jsx)("p",{className:"absolute bottom-5 left-5 font-semibold text-lg text-white",children:p.KeyH.description})}function x(e,t){return Math.max(0,Math.min(e,t))}function y(){let[e,t]=(0,o.useState)(a.normal),[n,s]=(0,o.useState)(new Date),[r,d]=(0,o.useState)(new Date),[m,u]=(0,o.useState)(!1),[p,y]=(0,o.useState)(!1),[w,j]=(0,o.useState)(0),g=(r.getTime()-n.getTime())/1e3,v=g-w;(0,o.useEffect)(()=>{let t=setInterval(()=>{let t=new Date,n=(t.getTime()-r.getTime())/1e3;d(t),m&&j(w+n),v>=(e.active+e.break)*60&&s(new Date)},100);return()=>clearInterval(t)},[r,m,w,v,e.active,e.break]);let N=(e.active+e.break)*60,k=x(v,60*e.active)/(60*e.active),S=x(v-60*e.active,60*e.break)/(60*e.break),T={sessionStartTime:n,currentTime:r,rawSecondsSinceStartTime:g,paused:m,secondsSinceStartTime:v,pomodoroType:e,trueRatio:v/N,displayRatio:.75*k+.25*S};return(0,i.jsxs)("div",{autoFocus:!0,tabIndex:0,className:"min-h-screen",onKeyDown:n=>{switch(n.code){case"KeyH":y(!p);break;case"KeyF":u(!m);break;case"KeyM":!function(e){let t;if("undefined"==typeof document)throw Error("This function should only be called on the client.");l=t=!l,document.querySelectorAll("audio").forEach(e=>{e.muted=t}),console.log("mute: "+l)}();break;case"KeyS":let i=Object.keys(a),o=i.findIndex(t=>JSON.stringify(a[t])===JSON.stringify(e));t(a[i[(o+1)%i.length]]),s(new Date);break;case"KeyN":v<=60*e.active?s(new Date(new Date().getTime()-6e4*e.active)):s(new Date);break;default:console.log(n.code+" was not captured")}},children:[(0,i.jsx)(c,{timeInfo:T}),(0,i.jsx)(h,{isMuted:l}),(0,i.jsx)(f,{timeInfo:T}),(0,i.jsx)(b,{showPage:p})]})}}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=9528)}),_N_E=e.O()}]);