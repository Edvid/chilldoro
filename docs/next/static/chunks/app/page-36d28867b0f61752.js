(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9528:function(e,t,n){Promise.resolve().then(n.bind(n,9060))},9060:function(e,t,n){"use strict";n.d(t,{default:function(){return b}});var o=n(7437),i=n(2265);let a={active:25,break:5};var c=n(6648);function l(e){let t=["spring","summer","autumn","winter"][Math.min(Math.floor(4*e.timeInfo.displayRatio),3)];return(0,o.jsx)("div",{className:"absolute w-full h-full z-[-100]",children:(0,o.jsx)(c.default,{fill:!0,objectFit:"contain",src:"/chilldoro/"+t+".png",alt:t+" image"})})}let s=!0;function r(e){if("undefined"==typeof document)throw Error("This function should only be called on the client.");var t=new Audio(e);document.body.appendChild(t),t.muted=s,t.play(),setTimeout(()=>{t.remove()},1e4)}function u(e){return("0"+e).slice(-2)}let d=!0;function m(e){let t=e.timeInfo.secondsSinceStartTime<=60*e.timeInfo.pomodoroType.active,n=t?Math.ceil(60*e.timeInfo.pomodoroType.active-e.timeInfo.secondsSinceStartTime):Math.ceil(60*e.timeInfo.pomodoroType.break-(e.timeInfo.secondsSinceStartTime-60*e.timeInfo.pomodoroType.active)),i="".concat(u(Math.floor(n/60)),":").concat(u(n%60)),a=e.timeInfo.paused?"text-black bg-cyan-200":t?"text-green-700 bg-white":"text-cyan-300 bg-white";return!d&&t?r("spring_upon_us.mp3"):d&&!t&&r("winter_upon_us.mp3"),d=t,(0,o.jsx)("h1",{className:"rounded-lg p-2 text-2xl font-extrabold text-center ".concat(a),children:i})}function f(e){let t=(e.timeInfo.displayRatio*Math.PI*2+4.19).toString()+"rad";return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"absolute top-0 left-0 size-[20svw]",children:[(0,o.jsx)(c.default,{className:"z-[-50]",fill:!0,objectFit:"contain",src:"/chilldoro/wheel.png",alt:"wheel image"}),(0,o.jsx)("div",{className:"py-[calc(10svw-2em)] px-[calc(10svw-4em)]",children:(0,o.jsx)(m,{timeInfo:e.timeInfo})}),(0,o.jsx)(c.default,{className:"z-[-25]",fill:!0,style:{rotate:t},objectFit:"contain",src:"/chilldoro/handle.png",alt:"handle image"})]})})}function h(e){return(0,o.jsx)("div",{className:"absolute top-0 right-0 size-[20svw]",children:e.isMuted?(0,o.jsx)(c.default,{className:"z-[-50]",fill:!0,objectFit:"contain",src:"/chilldoro/sound_off.png",alt:"sound off"}):(0,o.jsx)(c.default,{className:"z-[-50]",fill:!0,objectFit:"contain",src:"/chilldoro/sound_on.png",alt:"sound on"})})}function p(e,t){return Math.max(0,Math.min(e,t))}function b(){let[e,t]=(0,i.useState)(a),[n,c]=(0,i.useState)(new Date),[r,u]=(0,i.useState)(new Date),[d,m]=(0,i.useState)(!1),[b,v]=(0,i.useState)(0),x=(r.getTime()-n.getTime())/1e3,w=x-b;(0,i.useEffect)(()=>{let t=setInterval(()=>{let t=new Date,n=(t.getTime()-r.getTime())/1e3;u(t),d&&v(b+n),w>=(e.active+e.break)*60&&c(new Date)},100);return()=>clearInterval(t)},[r,d,b,w,e.active,e.break]);let g=(e.active+e.break)*60,y=p(w,60*e.active)/(60*e.active),j=p(w-60*e.active,60*e.break)/(60*e.break),S={sessionStartTime:n,currentTime:r,rawSecondsSinceStartTime:x,paused:d,secondsSinceStartTime:w,pomodoroType:e,trueRatio:w/g,displayRatio:.75*y+.25*j};return(0,o.jsxs)("div",{autoFocus:!0,tabIndex:0,className:"min-h-screen",onKeyDown:e=>{switch(e.code){case"KeyF":m(!d);break;case"KeyM":!function(e){let t;if("undefined"==typeof document)throw Error("This function should only be called on the client.");s=t=!s,document.querySelectorAll("audio").forEach(e=>{e.muted=t}),console.log("mute: "+s)}();break;default:console.log(e.code+" was not captured")}},children:[(0,o.jsx)(l,{timeInfo:S}),(0,o.jsx)(h,{isMuted:s}),(0,o.jsx)(f,{timeInfo:S})]})}}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=9528)}),_N_E=e.O()}]);